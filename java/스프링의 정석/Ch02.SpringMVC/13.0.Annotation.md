
# 스프링의 정석
- 2022.05.19(목)
- 강의 목표: Spring의 기본 원리 이해, Spring으로 웹 사이트 구축 & AWS 배포
- 강의 자료: https://github.com/castello/spring_basic
- 강의 진도 
	- Ch0217. @RequestParam 과 @ModelAttribute
	- Ch0218. @RequestMapping
	- Ch0219. 회원가입 화면 작성하기 

<br>

## @RequestParam 과 @ModelAttribute
### @RequestParam
1. `public void main(@RequestParam(name="year", required=false) String year)`
	- `@RequestParam`: 요청할 때 파라미터를 매개변수와 연결하기위해 사용하는 Annotation(생략가능)
	- `required=false`: 매개변수의 필수여부를 정의하는 속성	
2. `public void main(String year)`
	- `@RequestParam`은 생략 가능하므로, 매개변수의 타입과 이름만을 작성해 사용할 수 있다
	- `@RequestParam`을 생략한 경우, 매개변수는 필수가 아니다 (=`required=false`)
3. `required` 값이 자동지정되는 경우
	- `required=false`
		1. `public void main(@RequestParam(name="year", required=false) String year)`
		2. `public void main(@RequestParam(required=false) String year)`
		3. `public void main(String year)`
	- `required=true`
		1. `public void main(@RequestParam(name="year", required=true) String year)`
		2. `public void main(@RequestParam(required=true) String year)`
		3. `public void main(@RequestParam String year)`
		- `@RequestParam`의 `required` 속성의 기본값은 `true`이다
		- `name`값을 생략하면 매개변수의 이름을 그대로 사용한다 
4. 클라이언트가 파라미터 전달X
	- `required=false`
		- `http://localhost/ch2/test`		→ `year=null` : 필수가 아니므로, Error발생X
		- `http://localhost/ch2/test?year`	→ `year=""` 
	- `required=true`
		- `http://localhost/ch2/test`		→ `year=null` : 필수이므로 클라이언트에러인 404 Bad Request 발생
		- `http://localhost/ch2/test?year`	→ `year=""` 
5. 클라이언트가 파라미터 전달X & `required=false`
```java
public String main8(@RequestParam(required=false) int year) {   
//	http://localhost/ch2/requestParam8        ---->> 500 java.lang.IllegalStateException: Optional int parameter 'year' is present but cannot be translated into a null value due to being declared as a primitive type. Consider declaring it as object wrapper for the corresponding primitive type.
//	http://localhost/ch2/requestParam8?year   ---->> 400 Bad Request, nested exception is java.lang.NumberFormatException: For input string: "" 
	System.out.printf("[%s]year=[%s]%n", new Date(), year);
	return "yoil";
}
```
- 이 경우 500 Bad Request가 발생한 것은, 필수가 아님에도 메서드 로직에서 필요한 값이었기때문에 서버 에러가 발생했다
	- 이러한 오류를 막기위해 매개변수에 기본 값을 부여하는 것이 좋다(`defaultValue`)
	- `public String main((@RequestParam(required=false, defaultValue="1") int year)`
- 반면, int로 형변환할 수 없는 값을 전달한 경우는 클라이언트가 매개변수를 잘못 전달한 것이므로 클라이언트 에러가 발생한다
6. 다양한 관련 오류 정리: https://github.com/castello/spring_basic/blob/main/ch2/RequestParamTest.java


<br>

### @ModelAttribute