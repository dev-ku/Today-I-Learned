
# 스프링의 정석
- 2022.06.12(일)
- 강의 목표: Spring의 기본 원리 이해, Spring으로 웹 사이트 구축 & AWS 배포
- 강의 자료: https://github.com/castello/spring_basic
- 강의 진도 
	- Ch0227. 예외처리(1) - 실습
	- Ch0228. 예외처리(2) - 이론

<br>

## 예외처리-실습
- 실습 파일 
	- `error.jsp`: https://github.com/castello/spring_basic/blob/main/ch2/error.jsp 에서 복붙
	- `ExceptionController.java`: 하단 코드 참고
	- 확인: http://localhost:8080/jinsook/ex

<br>

```java
//ExceptionController.java
@Controller
public class ExceptionController {
	@RequestMapping("/ex")
	public void main() throws Exception{
		throw new Exception("예외 발생");
	}
}
```
- 예외가 발생했는데, 내부에서 해결하지 않으면 500 에러 발생

```java
//ExceptionController.java
@Controller
public class ExceptionController {
	@RequestMapping("/ex")
	public void main() throws Exception{
		try {
			throw new Exception("예외 발생");
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}
```
- 예외 처리 하고자하는 코드 선택 > 우클릭 > Surround withd > try catch block > 404 에러 발생
- Mapping된 URL로 접근 했을 때, 해당하는 view가 없으므로 404 에러 발생  

```java
//ExceptionController.java
@Controller
public class ExceptionController {
	@RequestMapping("/ex")
	public String main() throws Exception{
		try {
			throw new Exception("예외 발생");
		} catch (Exception e) {
			return "error"; // error.jsp로 연결
		}
	}
}
```
- main 메서드에서 jsp를 return하여 이동하도록 지정한다

```java
//ExceptionController.java
@Controller
public class ExceptionController {
	@RequestMapping("/ex")
	public String main() throws Exception{
		try {
			throw new Exception("예외 발생1");
		} catch (Exception e) {
			return "error"; // error.jsp로 연결
		}
	}

	@RequestMapping("/ex2")
	public String main2() throws Exception{
		try {
			throw new Exception("예외 발생2");
		} catch (Exception e) {
			return "error"; // error.jsp로 연결
		}
	}
}
```
```java
@ExceptionHandler(Exception.class)
public String catcher(Exception ex) {
	return "error";
}	

@RequestMapping("/ex")
public String main() throws Exception{
	throw new Exception("예외 발생1");
}	

@RequestMapping("/ex2")
public String main2() throws Exception{
	throw new Exception("예외 발생2");
}
```
- 만약 동일한 try-catch구문이 반복된다면 예외처리를 위한 메서드로 빼내서 사용할 수 있다
- 예외처리를 위한 메서드에 `@ExceptionHandler` 어노테이션을 붙여주면, 매개변수에 있는 예외가 발생한 경우 해당 예외를 처리해준다
- view(error.jsp)에서 어떤 예외가 발생했는지 보여주도록 수정해보자

```jsp
<!-- error.jsp -->

```