
# 스프링의 정석
- 2022.05.28(토)
- 강의 목표: Spring의 기본 원리 이해, Spring으로 웹 사이트 구축 & AWS 배포
- 강의 자료: https://github.com/castello/spring_basic
- 강의 진도 
	- Ch0223. 쿠키(Cookie)란

<br>

## Cookie
### Cookie란
- Cookie는 이름과 값의 쌍으로 구성된 작은 정보를 말한다. 아스키 문자만 사용 가능하다 
- 사용자의 Id, pwd, Domain, path, Max-Age ...등의 key에 맞게 값이 브라우저에 저장되어있다
- Cookie에 저장된 정보에는 유효기간이 존재한다. 시간이 지나면 사라진다
- 서버에 요청 시, domain과 path가 일치하는 경우에만 자동 전송된다

<br>

### [실습] Cookie를 사용한 로그인 화면 만들기
- https://github.com/castello/spring_basic/blob/main/ch2/loginForm.jsp
- 복사해 온 코드를 view로 등록한다 (src>main>webapp>WEB-INF>views>loginForm.jsp)

```java
@Controller
@RequestMapping("/login")
public class LoginController {
	@RequestMapping("/login")
	public String loginForm() {
		return "loginForm";
	}
}
```
- loginController를 하나 등록하고, 브라우저에서 확인한다 (http://localhost:8080/jinsook/login/login)
- Cookie를 사용해 아이디 기억 기능을 구현한다. Cookie는 브라우저에 저장되나

```java
@Controller
@RequestMapping("/login")
public class LoginController {
	@GetMapping("/login")
	public String loginForm() {
		return "loginForm";
	}
	@PostMapping("/login")
	public String login(String id, String pwd, String remeberId) throws Exception {
		// 1. id, pwd 확인 
		if(!loginCheck(id,pwd)){
			// 2-1. id, pwd 일치하지 않으면 loginForm으로 이동
			String msg = URLEncoder.encode("id 또는 pwd가 일치하지 않습니다", "utf-8");
			return "redirect:/login/login?msg="+msg;
		}
		// 2-2. id, pwd 일치하면 홈(index.jsp)으로 이동 
		return "redirect:/";
	}
	private boolean loginCheck(String id, String pwd) {
		return "abcd".equals(id) && "1234".equals(pwd);
	}
}
```
- 로그인 화면으로 이동하는 loginForm()는 Get방식 
- 로그인 시 입력받은 정보를 유효성 검사를 진행하는 login()은 Post방식

```java
// 
@Controller
public class HomeController {
	@RequestMapping(value = "/", method = RequestMethod.GET)
	public String home() {
		return "index";
	}
}	
```
- HomeComtroller는 스프링 프로젝트를 만들었을 때 기본으로 만들어지는 Controller이다 
- HomeComtroller가 "index"를 반환하도록 수정한다
